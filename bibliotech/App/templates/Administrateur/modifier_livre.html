{% extends 'Administrateur/base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-edit me-2"></i>Modifier le livre
                    </h3>
                </div>
                <div class="card-body" >
                    <form method="post" >
                        {% csrf_token %}
                        
                        <div class="row g-3">
                            <!-- Titre -->
                            <div class="col-md-12">
                                <label for="{{ form.titre.id_for_label }}" class="form-label">Titre*</label>
                                {{ form.titre }}
                            </div>
                            
                            <!-- Auteur -->
                            <div class="col-md-6">
                                <label for="{{ form.auteur.id_for_label }}" class="form-label">Auteur*</label>
                                {{ form.auteur }}
                            </div>
                            
                            <!-- Date de publication -->
                            <div class="col-md-6">
                                <label for="{{ form.date_pub.id_for_label }}" class="form-label">Date de publication</label>
                                {{ form.date_pub }}
                            </div>
                            
                            <!-- Genre -->
                            <div class="col-md-6">
                                <label for="{{ form.genre.id_for_label }}" class="form-label">Genre</label>
                                {{ form.genre }}
                            </div>
                            
                            <!-- Prix -->
                            <div class="col-md-6">
                                <label for="{{ form.prix.id_for_label }}" class="form-label">Prix (€)</label>
                                <div class="input-group">
                                    {{ form.prix }}
                                    <span class="input-group-text">€</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="{{ form.prix.id_for_label }}" class="form-label">Quantite</label>
                                <div class="input-group">
                                    {{ form.quantite }}
                                </div>
                            </div>
                            
                            <!-- Image -->
                            <div class="col-md-6">
                                <label for="{{ form.image_url.id_for_label }}" class="form-label">URL de l'image</label>
                                {{ form.image_url }}
                            </div>
                            
                            <!-- URL de téléchargement -->
                            <div class="col-md-6">
                                <label for="{{ form.download_url.id_for_label }}" class="form-label">URL de téléchargement</label>
                                {{ form.download_url }}
                            </div>
                            
                            <!-- Détails -->
                            <div class="col-12">
                                <label for="{{ form.detail.id_for_label }}" class="form-label">Description</label>
                                {{ form.detail }}
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                            <a href="{% url 'liste_livres' %}" class="btn btn-secondary me-md-2">
                                <i class="fas fa-times me-1"></i> Annuler
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i> Enregistrer
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Formatage du champ date
    const dateField = document.getElementById('{{ form.date_pub.id_for_label }}');
    if (dateField) {
        dateField.type = 'date';
        // Convertit la date au format YYYY-MM-DD si nécessaire
        if (dateField.value) {
            const date = new Date(dateField.value);
            dateField.value = date.toISOString().split('T')[0];
        }
    }
});
</script>
{% endblock %}